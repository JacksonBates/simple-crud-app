<!DOCTYPE html>

<!-- Rewrite this as responsive divs rather than a table -->

<html>
  <head>
    <% include ../partials/header.ejs %>
  </head>
  <body>
    <div class='container'>
      <h1>Admin Page | View all records</h1>
      <p><a href='/'><button type='button' class='btn btn-success'>Add new users</button></a><a href='/admin'>admin</a></p>
      <table class='table table-striped table-hover'>
        <tr class='info'>
          <th class='col-xs-offset-2 col-xs-2'>Username</th>
          <th class='col-xs-2'>Password</th>
          <th class='col-xs-2' colspan='2'></th>
        </tr>
      <% for(var i = 0; i < docs.length; i++) { %>
        <tr<% if (docs[i].password === 'password') { %> class='danger' title='This is a very dangerous password'<% }; %>>
          <td><%= docs[i].username %></td>
          <td><%= docs[i].password %></td>
          <td>
            <form action='<%= docs[i]._id %>/edit' method='get'>
              <input type='hidden' value='<%= docs[i].username %>' name='username'>
              <button type='submit' class='btn btn-info btn-small'>
                <span class='glyphicon glyphicon-edit'></span> Update Password
              </button>
            </form>
          </td>
          <td>
            <form action='<%= docs[i]._id %>/edit' method='post'>
            <input type='hidden' value='<%= docs[i].username %>' name='username'>
            <button type='submit' class='btn btn-danger btn-small'>
              <span class='glyphicon glyphicon-remove'></span> Delete
            </button>
            </form>
          </td>
        </tr>
      <% } %>
      </table>
    </div>
  </body>
</html>
